{"ast":null,"code":"import _slicedToArray from\"/Users/maqiang/Desktop/INFO 6250/student--qma16443/project/Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import{fetchLogin}from'../services/services';import messages from'../services/messages';import spinner from\"../services/spinner.svg\";//This function is to provide login interface\nvar Login=function Login(_ref){var onLogIn=_ref.onLogIn;// This state is all local to the component\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var performLogin=function performLogin(){if(!username){setError(messages.USERNAME_REQUIRED);return;}//validate user's name\nif(username==='dog'){setError(messages.BAD_USERNAME);return;}setError('');setIsLoading(true);fetchLogin(username).then(function(userInfo){console.log(userInfo);onLogIn(userInfo.username);setIsLoading(false);}).catch(function(err){setError(messages[err.code||'DEFAULT']);setIsLoading(false);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"login\"},/*#__PURE__*/React.createElement(\"input\",{className:\"username\",onChange:function onChange(e){return setUsername(e.target.value);},placeholder:\"Enter your username\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},error),isLoading?/*#__PURE__*/React.createElement(\"img\",{alt:\"spinner\",src:spinner}):/*#__PURE__*/React.createElement(\"button\",{className:\"loginbtn\",onClick:performLogin},\"Login\"));};export default Login;","map":{"version":3,"sources":["/Users/maqiang/Desktop/INFO 6250/student--qma16443/project/Project/src/components/Login.jsx"],"names":["React","useState","useContext","fetchLogin","messages","Login","onLogIn","username","setUsername","isLoading","setIsLoading","error","setError","performLogin","USERNAME_REQUIRED","BAD_USERNAME","then","userInfo","console","log","catch","err","code","e","target","value","spinner"],"mappings":"yLAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,UAAT,KAA2B,sBAA3B,CACA,MAAOC,CAAAA,QAAP,KAAqB,sBAArB,C,6CAGA;AACA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAe,IAAbC,CAAAA,OAAa,MAAbA,OAAa,CAC5B;AAD4B,cAEKL,QAAQ,CAAC,EAAD,CAFb,wCAEpBM,QAFoB,eAEVC,WAFU,8BAGOP,QAAQ,CAAC,KAAD,CAHf,yCAGpBQ,SAHoB,eAGTC,YAHS,8BAIDT,QAAQ,CAAC,EAAD,CAJP,yCAIpBU,KAJoB,eAIbC,QAJa,eAM3B,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAG,CAACN,QAAJ,CAAc,CACZK,QAAQ,CAACR,QAAQ,CAACU,iBAAV,CAAR,CACA,OACD,CAEF;AACC,GAAGP,QAAQ,GAAG,KAAd,CAAoB,CAClBK,QAAQ,CAACR,QAAQ,CAACW,YAAV,CAAR,CACA,OACD,CACDH,QAAQ,CAAC,EAAD,CAAR,CACAF,YAAY,CAAC,IAAD,CAAZ,CACAP,UAAU,CAACI,QAAD,CAAV,CACCS,IADD,CACO,SAACC,QAAD,CAAc,CACnBC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACAX,OAAO,CAACW,QAAQ,CAACV,QAAV,CAAP,CACAG,YAAY,CAAC,KAAD,CAAZ,CACD,CALD,EAMCU,KAND,CAMQ,SAACC,GAAD,CAAS,CACfT,QAAQ,CAACR,QAAQ,CAACiB,GAAG,CAACC,IAAJ,EAAY,SAAb,CAAT,CAAR,CACAZ,YAAY,CAAC,KAAD,CAAZ,CACD,CATD,EAUD,CAvBD,CAyBA,mBACE,2BAAK,SAAS,CAAC,OAAf,eACE,6BAAO,SAAS,CAAC,UAAjB,CAA4B,QAAQ,CAAG,kBAACa,CAAD,QAAOf,CAAAA,WAAW,CAACe,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAAvC,CAA6E,WAAW,CAAC,qBAAzF,EADF,cAEE,yBAAG,SAAS,CAAC,OAAb,EAAsBd,KAAtB,CAFF,CAGIF,SAAS,cACP,2BAAK,GAAG,CAAC,SAAT,CAAmB,GAAG,CAAEiB,OAAxB,EADO,cAEP,8BAAQ,SAAS,CAAG,UAApB,CAA+B,OAAO,CAAGb,YAAzC,UALN,CADF,CAWD,CA1CD,CA4CA,cAAeR,CAAAA,KAAf","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { fetchLogin } from '../services/services';\nimport messages from '../services/messages';\nimport spinner from '../services/spinner.svg';\n\n//This function is to provide login interface\nconst Login = ({onLogIn}) => {\n // This state is all local to the component\n  const [username, setUsername] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const performLogin = () => {\n    if(!username) {\n      setError(messages.USERNAME_REQUIRED);\n      return;\n    }\n\n   //validate user's name\n    if(username==='dog'){\n      setError(messages.BAD_USERNAME)\n      return;\n    }\n    setError('');\n    setIsLoading(true);\n    fetchLogin(username)\n    .then( (userInfo) => {\n      console.log(userInfo)\n      onLogIn(userInfo.username)\n      setIsLoading(false); \n    })\n    .catch( (err) => {\n      setError(messages[err.code || 'DEFAULT']);\n      setIsLoading(false);\n    });\n  };\n\n  return (\n    <div className=\"login\">\n      <input className=\"username\" onChange={ (e) => setUsername(e.target.value)  } placeholder=\"Enter your username\"/>\n      <p className=\"error\">{error}</p>\n      { isLoading ?\n          <img alt=\"spinner\" src={spinner}/> :\n          <button className = \"loginbtn\" onClick={ performLogin }>Login</button>\n      }\n    </div>\n  );\n\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}