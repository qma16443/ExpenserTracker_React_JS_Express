(this["webpackJsonpexpense-tracker"]=this["webpackJsonpexpense-tracker"]||[]).push([[0],{12:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(56),c=n.n(r),l=n(3),u=(n(12),function(){return o.a.createElement("h1",{className:"header"},"Expense Tracker")}),s=n(64),i=function(e,t){switch(t.type){case"UPDATE_TRANSACTION":return Object(s.a)({},e,{transactions:t.payload});default:return e}},m={transactions:[]},f=Object(a.createContext)(m),E=function(e){var t=e.children,n=Object(a.useReducer)(i,m),r=Object(l.a)(n,2),c=r[0],u=r[1];return o.a.createElement(f.Provider,{value:{transactions:c.transactions,updateTransactions:function(e){u({type:"UPDATE_TRANSACTION",payload:e})}}},t)},p=function(){var e=Object(a.useContext)(f).transactions,t=e.filter((function(e){return"Income"==e.type})).map((function(e){return e.amount})),n=e.filter((function(e){return"Expense"==e.type})).map((function(e){return e.amount})),r=t.reduce((function(e,t){return e+ +t}),0).toFixed(2),c=n.reduce((function(e,t){return e+ +t}),0).toFixed(2),l=r-c;return o.a.createElement("div",{className:"inc-exp-container"},o.a.createElement("div",null,o.a.createElement("h4",null,"Your Balance"),o.a.createElement("h1",null,"$",l)),o.a.createElement("div",null,o.a.createElement("h4",null,"Income"),o.a.createElement("p",{className:"money plus"},r)),o.a.createElement("div",null,o.a.createElement("h4",null,"Expense"),o.a.createElement("p",{className:"money minus"},c)))},h=function(e){return console.log("fail"),{code:"NETWORK-ERROR",err:e}},d=function(e){return Promise.reject(e)},b=function(e){var t=e.transaction,n=Object(a.useContext)(f).updateTransactions,r=function(e){(function(e){return fetch("/transaction",{method:"DELETE",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({id:e})}).catch(h).then((function(e){return e.ok?e.json():e.json().then(d)}))})(e).then((function(e){n(e)})).catch((function(e){console.log(" delete error")}))},c="Income"===t.type?"+":"-";return o.a.createElement("li",{className:"Expense"===t.type?"minus":"plus"},o.a.createElement("span",{className:"category"},t.category)," ",o.a.createElement("span",{className:"text"},t.text)," ",o.a.createElement("span",{className:"amount"},c,"$",Math.abs(t.amount)," ",o.a.createElement("span",{className:"date"},t.date)),o.a.createElement("button",{onClick:function(){return r(t.id)},className:"delete-btn"},"x"))},y=function(e){var t=e.clearTransactions;return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"cleanbtn",onClick:t},"Clear Transactions "))},g=n(57),v=n.n(g),O=function(){var e=Object(a.useContext)(f),t=e.transactions,n=e.updateTransactions;Object(a.useEffect)((function(){fetch("/transactions",{method:"GET"}).catch(h).then((function(e){return e.ok?e.json():e.json().then(d)})).then((function(e){n(e)})).catch((function(e){console.log(e)}))}),[]);return o.a.createElement("div",{className:"history"}," ",o.a.createElement("h3",null,"History"),o.a.createElement("ul",{className:"list",ref:function(e){if(e){v()([e],{removeOnSpill:!0})}}},t.map((function(e){return o.a.createElement(b,{key:e.id,transaction:e})}))),o.a.createElement("div",{className:"clean"},t.length>0?o.a.createElement(y,{clearTransactions:function(){fetch("/cleartransactions").then((function(e){return e.ok?e.json():e.json().then(d)})).then((function(e){n(e)})).catch((function(e){return console.log(e)}))}}):null))},j=["#123123","#154731","#165f40","#16784f","#14915f","#10ac6e","#0bc77e","#04e38d","#00ff9d"],N=["#b50d12","#bf2f1f","#c9452c","#d3583a","#dc6a48","#e57c58","#ee8d68","#f79d79","#ffae8a","#cc474b","#f55b5f"],x=[{type:"Business",amount:0,color:j[0]},{type:"Investments",amount:0,color:j[1]},{type:"Extra income",amount:0,color:j[2]},{type:"Deposits",amount:0,color:j[3]},{type:"Lottery",amount:0,color:j[4]},{type:"Gifts",amount:0,color:j[5]},{type:"Salary",amount:0,color:j[6]},{type:"Savings",amount:0,color:j[7]},{type:"Rental income",amount:0,color:j[8]}],T=[{type:"Bills",amount:0,color:N[0]},{type:"Car",amount:0,color:N[1]},{type:"Clothes",amount:0,color:N[2]},{type:"Travel",amount:0,color:N[3]},{type:"Food",amount:0,color:N[4]},{type:"Shopping",amount:0,color:N[5]},{type:"House",amount:0,color:N[6]},{type:"Entertainment",amount:0,color:N[7]},{type:"Phone",amount:0,color:N[8]},{type:"Pets",amount:0,color:N[9]},{type:"Other",amount:0,color:N[10]}],S=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(0),u=Object(l.a)(c,2),s=u[0],i=u[1],m=Object(a.useState)(""),E=Object(l.a)(m,2),p=E[0],d=E[1],b=Object(a.useState)(),y=Object(l.a)(b,2),g=y[0],v=y[1],O=Object(a.useState)(""),j=Object(l.a)(O,2),N=j[0],S=j[1],C=Object(a.useContext)(f).updateTransactions,R="Income"===p?x:T;return o.a.createElement("div",{className:"newTransaction"},o.a.createElement("h3",null,"Add new transaction"),o.a.createElement("form",null,o.a.createElement("div",{className:"form-control"},o.a.createElement("label",{htmlFor:"text"},"Income/Expense:"),o.a.createElement("br",null),o.a.createElement("select",{value:p,onChange:function(e){return d(e.target.value)}},o.a.createElement("option",{value:"Income"},"Income"),o.a.createElement("option",{value:"Expense"},"Expense"))),o.a.createElement("div",{className:"form-control"},o.a.createElement("label",{htmlFor:"category"},"Category: "),o.a.createElement("br",null),o.a.createElement("select",{value:n,onChange:function(e){return r(e.target.value)}},R.map((function(e){return o.a.createElement("option",{key:e.type,value:e.type},e.type)})))),o.a.createElement("div",{className:"form-control"},o.a.createElement("label",{htmlFor:"amount"},"Amount:"),o.a.createElement("br",null),o.a.createElement("input",{type:"number",value:s,onChange:function(e){return i(e.target.value)}})),o.a.createElement("div",{className:"form-control"},o.a.createElement("label",{htmlFor:"Date"},"Date:"),o.a.createElement("br",null),o.a.createElement("input",{type:"date",value:g,onChange:function(e){return v(e.target.value)}})),o.a.createElement("div",{className:"form-control"},o.a.createElement("label",{htmlFor:"remark"},"Remark:"),o.a.createElement("br",null),o.a.createElement("textarea",{type:"text",value:N,onChange:function(e){return S(e.target.value)}})),o.a.createElement("button",{className:"btn",onClick:function(e){var t;e.preventDefault(),(t={category:n,amount:+s,type:p,date:g,text:N},fetch("/transaction",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({transaction:t})}).catch(h).then((function(e){return e.json()}))).then((function(e){console.log(e),C(e),r(""),i(0),v(""),d(""),S("")})).catch((function(e){console.log(e)}))}},"Add transaction")))},C={DEFAULT:"Oh no!  Something went wrong, please try again",USERNAME_REQUIRED:"Username is required",NETWORK_ERROR:"There was a problem reaching your network, please try again",LOGIN_REQUIRED:"You must be logged in to view this content",LOGIN_UNAUTHORIZED:"You are not permitted to view this content",BAD_USERNAME:"Please choose a different username"},R=n(58),k=n.n(R),I=function(e){var t=e.onLogIn,n=Object(a.useState)(""),r=Object(l.a)(n,2),c=r[0],u=r[1],s=Object(a.useState)(!1),i=Object(l.a)(s,2),m=i[0],f=i[1],E=Object(a.useState)(""),p=Object(l.a)(E,2),b=p[0],y=p[1];return o.a.createElement("div",{className:"login"},o.a.createElement("input",{className:"username",onChange:function(e){return u(e.target.value)},placeholder:"Enter your username"}),o.a.createElement("p",{className:"error"},b),m?o.a.createElement("img",{alt:"spinner",src:k.a}):o.a.createElement("button",{className:"loginbtn",onClick:function(){c?"dog"!==c?(y(""),f(!0),function(e){return fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch(h).then((function(e){return e.ok?e.json():e.json().then(d)}))}(c).then((function(e){console.log(e),t(e.username),f(!1)})).catch((function(e){y(C[e.code||"DEFAULT"]),f(!1)}))):y(C.BAD_USERNAME):y(C.USERNAME_REQUIRED)}},"Login"))},D=function(e){e.username;var t=e.onLogout;return o.a.createElement("div",{className:"Logout"},o.a.createElement("button",{className:"loginbtn",onClick:function(){fetch("/session",{method:"DELETE"}).catch(h).then((function(e){return e.ok})).then((function(){t()})).catch((function(){return console.log("fail to sign out")}))}},"Sign Out"))},A=n(201),w=n(199),U=n(200),L=n(27),F=n(59),P=n(196),_=Object(P.a)((function(){return{income:{borderBottom:"10px solid rgba(0, 255, 0, 0.5)"},expense:{borderBottom:"10px solid rgba(255, 0, 0, 0.5)"}}})),B=function(e){x.forEach((function(e){return e.amount=0})),T.forEach((function(e){return e.amount=0}));var t=Object(a.useContext)(f).transactions.filter((function(t){return t.type===e})),n=t.reduce((function(e,t){return e+ +t.amount}),0),o="Income"===e?x:T;t.forEach((function(e){var t=o.find((function(t){return t.type===e.category}));t&&(t.amount+=+e.amount)}));var r=o.filter((function(e){return e.amount>0})),c={datasets:[{data:r.map((function(e){return e.amount})),backgroundColor:r.map((function(e){return e.color}))}],labels:r.map((function(e){return e.type}))};return{filteredCategories:r,total:n,chartData:c}},H=function(e){var t=e.title,n=e.subheader,a=B(t),r=a.total,c=a.chartData,l=_();return o.a.createElement("div",{className:"card"},o.a.createElement(A.a,{className:"Income"===t?l.income:l.expense},o.a.createElement(w.a,{title:t,subheader:n}),o.a.createElement(U.a,null,o.a.createElement(L.a,{variant:"h5"},"$",r),o.a.createElement(F.Doughnut,{data:c}))))};n(180);var G=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(l.a)(c,2),i=s[0],m=s[1];return Object(a.useEffect)((function(){fetch("/session",{method:"GET"}).catch(h).then((function(e){return e.ok?e.json():e.json().then(d)})).then((function(){r(!0)}))}),[]),o.a.createElement(E,null,n?o.a.createElement(o.a.Fragment,null,o.a.createElement(u,null),o.a.createElement(D,{username:i,onLogout:function(){r(!1),m("")}}),o.a.createElement(p,null),o.a.createElement("div",{className:"container"},o.a.createElement(H,{title:"Income"}),o.a.createElement(H,{title:"Expense"}),o.a.createElement(O,null),o.a.createElement(S,null))):o.a.createElement(I,{onLogIn:function(e){r(!0),m(e)}}))};c.a.render(o.a.createElement(G,null),document.getElementById("root"))},58:function(e,t,n){e.exports=n.p+"static/media/spinner.05360875.svg"},67:function(e,t,n){e.exports=n(181)}},[[67,1,2]]]);
//# sourceMappingURL=main.ac8da1c1.chunk.js.map